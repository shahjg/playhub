<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Lobby - TheGaming.co</title>
    <meta name="description" content="Waiting room - invite friends with your room code!">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#0a0a0f">
    <link rel="stylesheet" href="/header.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/js/cosmetics.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--accent:#14b8a6;--accent-glow:rgba(20,184,166,0.4);--accent-soft:rgba(20,184,166,0.12);--bg-primary:#0a0a0f;--bg-secondary:#12121a;--bg-card:rgba(255,255,255,0.02);--border:rgba(255,255,255,0.08);--border-accent:rgba(20,184,166,0.3);--text:#fff;--text-muted:rgba(255,255,255,0.5);--gold:#fbbf24;--green:#22c55e;--red:#ef4444}
        .theme-spyfall{--accent:#14b8a6;--accent-glow:rgba(20,184,166,0.4);--accent-soft:rgba(20,184,166,0.12);--border-accent:rgba(20,184,166,0.3)}
        .theme-avalon{--accent:#fbbf24;--accent-glow:rgba(251,191,36,0.4);--accent-soft:rgba(251,191,36,0.12);--border-accent:rgba(251,191,36,0.3)}
        .theme-werewolf{--accent:#a855f7;--accent-glow:rgba(168,85,247,0.4);--accent-soft:rgba(168,85,247,0.12);--border-accent:rgba(168,85,247,0.3)}
        .theme-imposter{--accent:#ef4444;--accent-glow:rgba(239,68,68,0.4);--accent-soft:rgba(239,68,68,0.12);--border-accent:rgba(239,68,68,0.3)}
        .theme-fake-artist{--accent:#ec4899;--accent-glow:rgba(236,72,153,0.4);--accent-soft:rgba(236,72,153,0.12);--border-accent:rgba(236,72,153,0.3)}
        .theme-insider{--accent:#6366f1;--accent-glow:rgba(99,102,241,0.4);--accent-soft:rgba(99,102,241,0.12);--border-accent:rgba(99,102,241,0.3)}
        .theme-power-struggle{--accent:#dc2626;--accent-glow:rgba(220,38,38,0.4);--accent-soft:rgba(220,38,38,0.12);--border-accent:rgba(220,38,38,0.3)}
        .theme-codenames{--accent:#dc2626;--accent-glow:rgba(220,38,38,0.4);--accent-soft:rgba(220,38,38,0.12);--border-accent:rgba(220,38,38,0.3)}
        .theme-wavelength{--accent:#f97316;--accent-glow:rgba(249,115,22,0.4);--accent-soft:rgba(249,115,22,0.12);--border-accent:rgba(249,115,22,0.3)}
        .theme-word-bomb{--accent:#f43f5e;--accent-glow:rgba(244,63,94,0.4);--accent-soft:rgba(244,63,94,0.12);--border-accent:rgba(244,63,94,0.3)}
        .theme-herd-mentality{--accent:#8b5cf6;--accent-glow:rgba(139,92,246,0.4);--accent-soft:rgba(139,92,246,0.12);--border-accent:rgba(139,92,246,0.3)}
        .theme-categories{--accent:#06b6d4;--accent-glow:rgba(6,182,212,0.4);--accent-soft:rgba(6,182,212,0.12);--border-accent:rgba(6,182,212,0.3)}
        .theme-npat{--accent:#f59e0b;--accent-glow:rgba(245,158,11,0.4);--accent-soft:rgba(245,158,11,0.12);--border-accent:rgba(245,158,11,0.3)}
        .theme-word-association{--accent:#8b5cf6;--accent-glow:rgba(139,92,246,0.4);--accent-soft:rgba(139,92,246,0.12);--border-accent:rgba(139,92,246,0.3)}
        .theme-charades{--accent:#ec4899;--accent-glow:rgba(236,72,153,0.4);--accent-soft:rgba(236,72,153,0.12);--border-accent:rgba(236,72,153,0.3)}
        .theme-celebrity{--accent:#fbbf24;--accent-glow:rgba(251,191,36,0.4);--accent-soft:rgba(251,191,36,0.12);--border-accent:rgba(251,191,36,0.3)}
        .theme-fishbowl{--accent:#06b6d4;--accent-glow:rgba(6,182,212,0.4);--accent-soft:rgba(6,182,212,0.12);--border-accent:rgba(6,182,212,0.3)}
        .theme-most-likely-to{--accent:#f43f5e;--accent-glow:rgba(244,63,94,0.4);--accent-soft:rgba(244,63,94,0.12);--border-accent:rgba(244,63,94,0.3)}
        .theme-sketch-guess{--accent:#22c55e;--accent-glow:rgba(34,197,94,0.4);--accent-soft:rgba(34,197,94,0.12);--border-accent:rgba(34,197,94,0.3)}
        .theme-fools-gold{--accent:#fbbf24;--accent-glow:rgba(251,191,36,0.4);--accent-soft:rgba(251,191,36,0.12);--border-accent:rgba(251,191,36,0.3)}
        .theme-broken-pictionary{--accent:#f97316;--accent-glow:rgba(249,115,22,0.4);--accent-soft:rgba(249,115,22,0.12);--border-accent:rgba(249,115,22,0.3)}
        .theme-doodle-duel{--accent:#ec4899;--accent-glow:rgba(236,72,153,0.4);--accent-soft:rgba(236,72,153,0.12);--border-accent:rgba(236,72,153,0.3)}
        .theme-two-truths{--accent:#22c55e;--accent-glow:rgba(34,197,94,0.4);--accent-soft:rgba(34,197,94,0.12);--border-accent:rgba(34,197,94,0.3)}
        .theme-ludo{--accent:#22c55e;--accent-glow:rgba(34,197,94,0.4);--accent-soft:rgba(34,197,94,0.12);--border-accent:rgba(34,197,94,0.3)}
        .theme-punchline{--accent:#fbbf24;--accent-glow:rgba(251,191,36,0.4);--accent-soft:rgba(251,191,36,0.12);--border-accent:rgba(251,191,36,0.3)}
        .theme-trivia-royale{--accent:#a855f7;--accent-glow:rgba(168,85,247,0.4);--accent-soft:rgba(168,85,247,0.12);--border-accent:rgba(168,85,247,0.3)}
        .theme-this-or-that-party{--accent:#f97316;--accent-glow:rgba(249,115,22,0.4);--accent-soft:rgba(249,115,22,0.12);--border-accent:rgba(249,115,22,0.3)}
        .theme-hot-takes-party{--accent:#ef4444;--accent-glow:rgba(239,68,68,0.4);--accent-soft:rgba(239,68,68,0.12);--border-accent:rgba(239,68,68,0.3)}
        .theme-never-ever-party{--accent:#ec4899;--accent-glow:rgba(236,72,153,0.4);--accent-soft:rgba(236,72,153,0.12);--border-accent:rgba(236,72,153,0.3)}
        .theme-bet-or-bluff{--accent:#10b981;--accent-glow:rgba(16,185,129,0.4);--accent-soft:rgba(16,185,129,0.12);--border-accent:rgba(16,185,129,0.3)}
        body{font-family:'Inter',sans-serif;background:var(--bg-primary);color:var(--text);min-height:100vh;display:flex;flex-direction:column;overflow-x:hidden}
        .bg-container{position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:0;overflow:hidden}
        .bg-gradient{position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(ellipse 80% 50% at 20% 0%,var(--accent-soft) 0%,transparent 50%),radial-gradient(ellipse 60% 40% at 90% 100%,var(--accent-soft) 0%,transparent 50%),var(--bg-primary)}
        .glow-orb{position:absolute;width:400px;height:400px;background:radial-gradient(circle,var(--accent-glow) 0%,transparent 70%);border-radius:50%;filter:blur(80px);opacity:0.3;animation:orbFloat 25s ease-in-out infinite}
        @keyframes orbFloat{0%,100%{transform:translate(0,0)}33%{transform:translate(60vw,20vh)}66%{transform:translate(30vw,60vh)}}
        .grid-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-image:linear-gradient(var(--border) 1px,transparent 1px),linear-gradient(90deg,var(--border) 1px,transparent 1px);background-size:60px 60px;opacity:0.3}
        header{position:fixed;top:0;left:0;right:0;z-index:100;height:60px;display:flex;align-items:center;padding:0 18px;background:rgba(10,10,15,0.88);backdrop-filter:blur(18px);border-bottom:1px solid rgba(255,255,255,0.06)}
        .nav-inner{width:100%;max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:24px}
        .nav-left{justify-self:flex-start}
        .nav-right-wrapper{justify-self:flex-end}
        .leave-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:8px;background:transparent;border:1px solid var(--border);color:var(--text-muted);font-size:0.8rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;transition:all 0.2s;text-decoration:none}
        .leave-btn:hover{background:rgba(239,68,68,0.1);color:var(--red);border-color:var(--red)}
        .leave-btn svg{width:16px;height:16px}
        .header-logo{font-family:'Bebas Neue',sans-serif;font-size:1.6rem;letter-spacing:4px;color:#fff;text-decoration:none;position:relative}
        .header-logo::after{content:'';position:absolute;bottom:-2px;left:0;right:0;height:2px;background:linear-gradient(90deg,#ff6b9d,#4facfe,#a855f7)}
        main{flex:1;display:flex;flex-direction:column;align-items:center;padding:80px 20px 40px;max-width:600px;margin:0 auto;width:100%;position:relative;z-index:1}
        .game-header{text-align:center;margin-bottom:1.5rem;width:100%}
        .game-title{font-family:'Bebas Neue',sans-serif;font-size:3rem;letter-spacing:5px;color:var(--text);margin-bottom:0.25rem}
        .how-to-play-btn{background:transparent;border:1px solid var(--border);color:var(--text-muted);padding:0.5rem 1rem;border-radius:8px;font-size:0.8rem;font-weight:600;cursor:pointer;transition:all 0.2s;text-transform:uppercase;letter-spacing:1px}
        .how-to-play-btn:hover{background:var(--accent-soft);color:var(--accent);border-color:var(--accent)}
        .room-code-section{width:100%;margin-bottom:1.5rem}
        .room-code-card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:20px;padding:2rem;text-align:center;position:relative}
        .room-code-card::before{content:'';position:absolute;top:0;left:40px;right:40px;height:1px;background:linear-gradient(90deg,transparent,var(--accent),transparent)}
        .room-code-label{font-size:0.75rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:2px;margin-bottom:0.75rem}
        .room-code-value{font-family:'Bebas Neue',sans-serif;font-size:5rem;letter-spacing:12px;color:var(--accent);text-shadow:0 0 60px var(--accent-glow);line-height:1;animation:codeGlow 4s ease-in-out infinite}
        @keyframes codeGlow{0%,100%{text-shadow:0 0 40px var(--accent-glow)}50%{text-shadow:0 0 80px var(--accent-glow),0 0 120px var(--accent-glow)}}
        .room-code-hint{font-size:0.85rem;color:var(--text-muted);margin-top:1rem;margin-bottom:1rem}
        .room-code-actions{display:flex;justify-content:center;gap:0.75rem;flex-wrap:wrap}
        .copy-btn{display:inline-flex;align-items:center;gap:8px;background:var(--bg-primary);border:1px solid var(--border);color:var(--text-muted);padding:0.7rem 1.1rem;border-radius:10px;font-size:0.8rem;font-weight:700;cursor:pointer;transition:all 0.2s;text-transform:uppercase;letter-spacing:0.5px}
        .copy-btn:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-soft)}
        .copy-btn.copied{border-color:var(--green);color:var(--green);background:rgba(34,197,94,0.1)}
        .copy-btn svg{width:16px;height:16px}
        .players-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:16px;padding:1.25rem;width:100%;margin-bottom:1.5rem}
        .players-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:0.75rem;border-bottom:1px solid var(--border)}
        .players-title{font-family:'Bebas Neue',sans-serif;font-size:1.15rem;letter-spacing:2px;color:var(--text)}
        .players-count{font-size:0.85rem;color:var(--text-muted)}
        .players-count span{color:var(--accent);font-weight:800}
        .players-list{display:flex;flex-direction:column;gap:6px;max-height:280px;overflow-y:auto}
        .player-item{display:flex;align-items:center;justify-content:space-between;padding:0.7rem 0.9rem;background:var(--bg-card);border-radius:10px;border:1px solid transparent;transition:all 0.2s;animation:slideIn 0.3s ease forwards;opacity:0}
        @keyframes slideIn{to{opacity:1}}
        .player-item:hover{border-color:var(--border)}
        .player-item.is-host{background:var(--accent-soft);border-color:var(--border-accent)}
        .player-item.is-me{border-color:var(--accent)}
        .player-info{display:flex;align-items:center;gap:10px}
        .player-avatar{width:32px;height:32px;background:var(--bg-primary);border:1px solid var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue',sans-serif;font-size:0.9rem;color:var(--accent)}
        .player-item.is-host .player-avatar{background:var(--accent);border-color:var(--accent);color:var(--bg-primary)}
        .player-name{font-weight:600;font-size:0.9rem;color:var(--text)}
        .player-name.premium{background:linear-gradient(90deg,var(--gold),#f59e0b,var(--gold));background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:goldShimmer 3s linear infinite}
        @keyframes goldShimmer{0%{background-position:0% center}100%{background-position:200% center}}
        .player-badges{display:flex;align-items:center;gap:6px}
        .badge{font-size:0.6rem;font-weight:800;padding:0.2rem 0.5rem;border-radius:5px;text-transform:uppercase;letter-spacing:0.5px}
        .badge-host{background:var(--gold);color:var(--bg-primary)}
        .badge-you{background:rgba(255,255,255,0.1);color:var(--text-muted);border:1px solid var(--border)}
        .kick-btn{background:transparent;border:1px solid var(--red);color:var(--red);padding:0.25rem 0.5rem;border-radius:5px;font-size:0.65rem;font-weight:800;cursor:pointer;opacity:0;transition:all 0.2s;text-transform:uppercase}
        .player-item:hover .kick-btn{opacity:1}
        .kick-btn:hover{background:var(--red);color:#fff}
        .players-empty{text-align:center;padding:2rem;color:var(--text-muted);font-size:0.9rem}
        .settings-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:16px;padding:1.25rem;width:100%;margin-bottom:1.5rem}
        .settings-header{display:flex;align-items:center;gap:8px;margin-bottom:1rem}
        .settings-title{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;color:var(--text)}
        .host-badge{font-size:0.55rem;font-weight:800;padding:0.2rem 0.4rem;border-radius:4px;background:var(--gold);color:var(--bg-primary);text-transform:uppercase;letter-spacing:1px}
        .setting-group{margin-bottom:1rem}
        .setting-group:last-child{margin-bottom:0}
        .setting-label{display:block;font-size:0.7rem;font-weight:700;color:var(--text-muted);margin-bottom:0.4rem;text-transform:uppercase;letter-spacing:1px}
        .setting-select{width:100%;padding:0.75rem 1rem;background:var(--bg-primary);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:0.9rem;font-family:inherit;cursor:pointer;transition:all 0.2s}
        .setting-select:focus{outline:none;border-color:var(--accent)}
        .setting-select option{background:var(--bg-secondary)}
        .setting-checkbox{display:flex;align-items:center;gap:10px;padding:0.75rem;background:var(--bg-primary);border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:border-color 0.2s}
        .setting-checkbox:hover{border-color:var(--accent)}
        .setting-checkbox input{width:18px;height:18px;accent-color:var(--accent);cursor:pointer}
        .setting-checkbox-text{flex:1}
        .setting-checkbox-title{font-weight:600;font-size:0.9rem;color:var(--text)}
        .setting-checkbox-desc{font-size:0.75rem;color:var(--text-muted);margin-top:0.15rem}
        .location-preview{background:var(--bg-primary);border-radius:8px;padding:0.75rem;margin-top:0.5rem;border:1px solid var(--border)}
        .location-preview-title{font-size:0.65rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:0.5rem;font-weight:700}
        .location-tags{display:flex;flex-wrap:wrap;gap:5px}
        .location-tag{background:var(--accent-soft);border:1px solid var(--border-accent);padding:0.25rem 0.5rem;border-radius:5px;font-size:0.7rem;color:var(--accent);font-weight:600}
        .start-section{width:100%}
        .min-players-warning{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.25);border-radius:10px;padding:0.9rem;text-align:center;margin-bottom:1rem;color:var(--red);font-size:0.85rem;font-weight:600}
        .waiting-message{background:var(--bg-card);border:1px solid var(--border);border-radius:10px;padding:1.25rem;text-align:center;color:var(--text-muted);font-size:0.95rem}
        .waiting-dots{display:inline-flex;gap:4px;margin-left:6px}
        .waiting-dot{width:5px;height:5px;background:var(--accent);border-radius:50%;animation:dotBounce 1.4s ease-in-out infinite}
        .waiting-dot:nth-child(2){animation-delay:0.15s}
        .waiting-dot:nth-child(3){animation-delay:0.3s}
        @keyframes dotBounce{0%,80%,100%{transform:translateY(0);opacity:0.4}40%{transform:translateY(-5px);opacity:1}}
        .btn{width:100%;padding:1rem;border-radius:10px;font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:3px;cursor:pointer;transition:all 0.2s;border:none}
        .btn-primary{background:var(--accent);color:#fff;box-shadow:0 4px 20px var(--accent-glow)}
        .btn-primary:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 30px var(--accent-glow);filter:brightness(1.1)}
        .btn:disabled{opacity:0.4;cursor:not-allowed;transform:none!important}
        .modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);display:none;align-items:center;justify-content:center;z-index:1000;padding:1rem;overflow-y:auto}
        .modal-overlay.visible{display:flex}
        .modal{background:var(--bg-secondary);border:1px solid var(--border);border-radius:20px;width:100%;max-width:520px;max-height:calc(100vh - 2rem);display:flex;flex-direction:column;animation:modalIn 0.25s ease;box-shadow:0 0 60px var(--accent-glow);margin:auto}
        @keyframes modalIn{from{opacity:0;transform:scale(0.95) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
        .modal-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}
        .modal-title{font-family:'Bebas Neue',sans-serif;font-size:1.4rem;letter-spacing:2px;color:var(--accent)}
        .modal-close{background:transparent;border:none;color:var(--text-muted);font-size:1.5rem;cursor:pointer;line-height:1;transition:color 0.2s}
        .modal-close:hover{color:var(--text)}
        .modal-body{padding:1.5rem;color:var(--text-muted);line-height:1.7;overflow-y:auto;flex:1}
        .modal-body h3{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;color:var(--accent);margin-top:1.25rem;margin-bottom:0.5rem;letter-spacing:1px}
        .modal-body h3:first-child{margin-top:0}
        .modal-body p{margin-bottom:0.75rem;color:var(--text)}
        .modal-body ul,.modal-body ol{margin-left:1.25rem;margin-bottom:0.75rem}
        .modal-body li{margin-bottom:0.4rem;color:var(--text)}
        .modal-body strong{color:var(--accent);font-weight:700}
        .modal-body .role-card{background:var(--bg-primary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.5rem}
        .modal-body .role-name{font-weight:700;color:var(--accent);margin-bottom:0.25rem}
        .modal-body .role-desc{font-size:0.9rem;color:var(--text-muted)}
        .modal-body .tip-box{background:var(--accent-soft);border:1px solid var(--border-accent);border-radius:8px;padding:0.75rem;margin-top:0.75rem}
        .modal-footer{padding:1rem 1.5rem;border-top:1px solid var(--border);flex-shrink:0}
        .modal-btn{width:100%;padding:0.8rem;background:var(--accent);color:#fff;border:none;border-radius:10px;font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;cursor:pointer;transition:all 0.2s}
        .modal-btn:hover{filter:brightness(1.1)}
        .confirm-modal .modal-body{text-align:center;padding:2rem 1.5rem}
        .confirm-modal .modal-message{font-size:1rem;color:var(--text);margin-bottom:1.5rem}
        .confirm-modal .modal-actions{display:flex;gap:0.75rem}
        .confirm-modal .modal-btn{flex:1}
        .confirm-modal .modal-btn.cancel{background:var(--bg-primary);border:1px solid var(--border);color:var(--text-muted)}
        .confirm-modal .modal-btn.danger{background:var(--red)}
        .party-mode .players-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;max-height:400px;overflow-y:auto;padding:1rem;background:rgba(0,0,0,0.2);border-radius:12px;border:1px solid var(--border)}
        .party-mode .player-item{padding:0.6rem 0.8rem;flex-direction:row;justify-content:flex-start}
        .party-mode .player-avatar{width:28px;height:28px;min-width:28px;font-size:0.75rem}
        .party-mode .player-name{font-size:0.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .party-mode .player-badges{display:none}
        .party-player-count{display:flex;align-items:center;justify-content:center;gap:12px;padding:1rem;background:linear-gradient(135deg,var(--accent-soft),transparent);border:1px solid var(--border-accent);border-radius:12px;margin-bottom:1rem}
        .party-player-count .count-number{font-family:'Bebas Neue',sans-serif;font-size:2.5rem;color:var(--accent);line-height:1}
        .party-player-count .count-label{font-size:0.8rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px}
        .party-player-count .count-status{font-size:0.75rem;color:var(--text-muted);padding:4px 10px;background:rgba(255,255,255,0.05);border-radius:20px}
        .party-player-count .count-status.ready{background:rgba(34,197,94,0.2);color:#86efac}
        .custom-words-hint{font-size:11px;color:rgba(255,255,255,0.5);margin-top:6px}
        footer{background:#000;position:relative;z-index:10;margin-top:auto}
        .footer-border{height:3px;background:linear-gradient(90deg,#ff6b9d,#4facfe,#a855f7,#ff6b9d);background-size:300% 100%;animation:gradientSlide 6s linear infinite}
        @keyframes gradientSlide{0%{background-position:0% 50%}100%{background-position:300% 50%}}
        .footer-main{max-width:1100px;margin:0 auto;padding:40px 20px 25px}
        .footer-links{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;max-width:500px;margin:0 auto}
        .footer-column{text-align:center}
        .footer-column h5{font-family:'Bebas Neue',sans-serif;font-size:0.9rem;letter-spacing:2px;margin-bottom:12px;color:rgba(255,255,255,0.8)}
        .footer-column ul{list-style:none;display:flex;flex-direction:column;gap:8px}
        .footer-column a{color:rgba(255,255,255,0.4);font-size:0.85rem;transition:color 0.2s;text-decoration:none}
        .footer-column a:hover{color:var(--accent)}
        .footer-bottom{padding-top:20px;border-top:1px solid rgba(255,255,255,0.06);text-align:center}
        .footer-copyright{font-size:0.8rem;color:rgba(255,255,255,0.35);margin-bottom:10px}
        .footer-legal{display:flex;justify-content:center;gap:20px}
        .footer-legal a{color:rgba(255,255,255,0.35);font-size:0.75rem;text-decoration:none;transition:color 0.2s}
        .footer-legal a:hover{color:#fff}
        @media(max-width:600px){header{height:56px;padding:0 14px}.header-logo{font-size:1.4rem;letter-spacing:3px}.leave-btn{padding:6px 10px;font-size:0.75rem}.leave-btn span{display:none}main{padding:70px 16px 30px}.game-title{font-size:2.4rem}.room-code-card{padding:1.5rem}.room-code-value{font-size:3.5rem;letter-spacing:8px}.room-code-actions{flex-direction:column}.copy-btn{width:100%;justify-content:center}.players-section,.settings-section{padding:1rem}.kick-btn{opacity:1}.btn{padding:0.9rem;font-size:1.15rem}.modal{border-radius:16px}.footer-links{grid-template-columns:1fr;gap:20px}}
    </style>
</head>
<body class="theme-spyfall">
<div class="bg-container"><div class="bg-gradient"></div><div class="glow-orb"></div><div class="glow-orb"></div><div class="grid-overlay"></div></div>
<header><nav class="nav-inner"><div class="nav-left"><a href="/squad-games.html" class="leave-btn" id="leave-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg><span>Leave</span></a></div><a href="/" class="header-logo">THEGAMING.CO</a><div class="nav-right-wrapper" id="site-header"></div></nav></header>
<main>
    <div class="game-header"><h1 class="game-title" id="game-title">SPY HUNT</h1><button class="how-to-play-btn" onclick="showHowToPlay()">How to Play</button></div>
    <div class="room-code-section"><div class="room-code-card"><div class="room-code-label">Share This Code</div><div class="room-code-value" id="room-code">------</div><div class="room-code-hint">Join at thegaming.co/lobby</div><div class="room-code-actions"><button class="copy-btn" id="copy-code-btn" onclick="copyRoomCode()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>Copy Code</button><button class="copy-btn" id="copy-link-btn" onclick="copyLink()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>Copy Link</button></div></div></div>
    <div class="players-section"><div class="players-header"><h2 class="players-title">Players</h2><div class="players-count"><span id="player-count">0</span>/<span id="max-players">20</span></div></div><div class="players-list" id="players-list"><div class="players-empty">Connecting...</div></div></div>
    <div class="settings-section" id="settings-section" style="display:none"><div class="settings-header"><h2 class="settings-title">Settings</h2><span class="host-badge">Host</span></div><div class="setting-group" id="category-group"><label class="setting-label" id="category-label">Location Pack</label><select class="setting-select" id="category-select" onchange="updateLocationPreview();updateCustomWordsVisibility()"></select><div class="location-preview" id="location-preview" style="display:none"><div class="location-preview-title">Included Locations</div><div class="location-tags" id="location-tags"></div></div><div class="custom-words-group" id="custom-words-group" style="display:none"><label class="setting-label" style="margin-top:12px">Your Custom Words</label><textarea class="setting-select" id="custom-words" placeholder="word1, word2, word3..." rows="3" style="resize:vertical;min-height:70px"></textarea><div class="custom-words-hint">Enter at least 10 words separated by commas</div></div></div><div class="setting-group" id="two-spies-group" style="display:none"><label class="setting-checkbox" for="two-spies"><input type="checkbox" id="two-spies"><div class="setting-checkbox-text"><div class="setting-checkbox-title">Two Spies Mode</div><div class="setting-checkbox-desc">Requires 5+ players</div></div></label></div></div>
    <div class="start-section"><div class="min-players-warning" id="min-warning" style="display:none">Need <span id="min-players">4</span> players to start</div><div class="waiting-message" id="waiting-message" style="display:none">Waiting for host to start<span class="waiting-dots"><span class="waiting-dot"></span><span class="waiting-dot"></span><span class="waiting-dot"></span></span></div><button class="btn btn-primary" id="start-btn" onclick="startGame()" style="display:none">Start Game</button></div>
</main>
<div class="modal-overlay" id="how-to-play-modal"><div class="modal"><div class="modal-header"><h2 class="modal-title" id="modal-title">How to Play</h2><button class="modal-close" onclick="closeModal('how-to-play-modal')">&times;</button></div><div class="modal-body" id="modal-body"></div><div class="modal-footer"><button class="modal-btn" onclick="closeModal('how-to-play-modal')">Got It</button></div></div></div>
<div class="modal-overlay confirm-modal" id="confirm-modal"><div class="modal"><div class="modal-header"><h2 class="modal-title" id="confirm-title">Confirm</h2><button class="modal-close" onclick="closeModal('confirm-modal')">&times;</button></div><div class="modal-body"><p class="modal-message" id="confirm-message">Are you sure?</p><div class="modal-actions"><button class="modal-btn cancel" onclick="closeModal('confirm-modal')">Cancel</button><button class="modal-btn danger" id="confirm-btn" onclick="confirmAction()">Confirm</button></div></div></div></div>
<footer><div class="footer-border"></div><div class="footer-main"><div class="footer-links"><div class="footer-column"><h5>GAMES</h5><ul><li><a href="/solo.html">Solo</a></li><li><a href="/squad-games.html">Squad</a></li><li><a href="/party-games.html">Party</a></li></ul></div><div class="footer-column"><h5>COMMUNITY</h5><ul><li><a href="/leaderboards.html">Leaderboards</a></li><li><a href="/supporters.html">Supporters</a></li></ul></div><div class="footer-column"><h5>COMPANY</h5><ul><li><a href="/about.html">About</a></li><li><a href="/contact.html">Contact</a></li></ul></div></div><div class="footer-bottom"><p class="footer-copyright">¬© 2025 TheGaming.co</p><div class="footer-legal"><a href="/privacy.html">Privacy</a><a href="/terms.html">Terms</a></div></div></div></footer>
<script>
const BACKEND_URL='https://web-production-519c7.up.railway.app',SUPABASE_URL='https://tvvivtmzofsyehatzlvl.supabase.co',SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR2dml2dG16b2ZzeWVoYXR6bHZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4OTExODYsImV4cCI6MjA4MDQ2NzE4Nn0.Qy8kHMO0Nb4yJ0ZHjby7RuQtzwWB8rUcZvkdnbL1b3M';
const socket=io(BACKEND_URL,{transports:['websocket','polling']}),supabaseClient=supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);
const GAMES={
'spyfall': {
    displayName: 'SPY HUNT', backendType: 'spyfall', theme: 'theme-spyfall', minPlayers: 4, maxPlayers: 20,
    categoryLabel: 'Location Pack',
    categories: [{value:'random',text:'üé≤ Random'},{value:'classic',text:'üèõÔ∏è Classic'},{value:'modern',text:'üèôÔ∏è Modern'},{value:'adult',text:'üîû Adult'},{value:'marvel',text:'ü¶∏ Marvel'},{value:'dc',text:'ü¶á DC'},{value:'movies',text:'üé¨ Movies'},{value:'medieval',text:'‚öîÔ∏è Medieval'},{value:'websites',text:'üåê Websites'},{value:'popculture',text:'üì∫ Pop Culture'},{value:'anime',text:'üéå Anime'},{value:'horror',text:'üî™ Horror'}],
    showTwoSpies: true, showLocationPreview: true, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>One player is secretly the <strong>Spy</strong> who doesn\'t know the location. Everyone else knows where they are and must find the Spy.</p><h3>üë• Roles</h3><div class="role-card"><div class="role-name">üïµÔ∏è The Spy</div><div class="role-desc">You don\'t know the location. Listen to others and blend in!</div></div><div class="role-card"><div class="role-name">üë§ Regular Players</div><div class="role-desc">You know the location. Find the Spy without revealing too much!</div></div><h3>üéÆ How to Play</h3><ol><li>Players take turns asking each other questions</li><li>Questions should catch the Spy but not reveal the location</li><li>After discussion, vote on who the Spy is</li></ol><h3>üèÜ Winning</h3><ul><li><strong>Players win</strong> by voting out the Spy</li><li><strong>Spy wins</strong> by guessing location or surviving</li></ul>',
    gameFile: '/games/squad/spyfall.html'
},
'avalon': {
    displayName: 'SECRET ROLES', backendType: 'avalon', theme: 'theme-avalon', minPlayers: 5, maxPlayers: 15,
    categoryLabel: 'Mode', categories: [{value:'standard',text:'Standard'},{value:'advanced',text:'Advanced'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Good vs Evil! Complete quests to determine the fate of the kingdom.</p><h3>üë• Good Team</h3><div class="role-card"><div class="role-name">üîµ Loyal Servant</div><div class="role-desc">Basic good role. Vote wisely on quests!</div></div><div class="role-card"><div class="role-name">üßô Merlin</div><div class="role-desc">Knows Evil players but must stay hidden from Assassin!</div></div><h3>üë• Evil Team</h3><div class="role-card"><div class="role-name">üî¥ Minion</div><div class="role-desc">Knows fellow Evil. Sabotage quests!</div></div><div class="role-card"><div class="role-name">üó°Ô∏è Assassin</div><div class="role-desc">Can kill Merlin if Good wins 3 quests!</div></div><h3>üéÆ How to Play</h3><ol><li>Leader proposes quest team</li><li>Everyone votes Approve/Reject</li><li>Team members secretly pass or fail</li></ol><h3>üèÜ Winning</h3><ul><li><strong>Good wins</strong> with 3 successful quests</li><li><strong>Evil wins</strong> with 3 failed quests or killing Merlin</li></ul>',
    gameFile: '/games/squad/avalon.html'
},
'werewolf': {
    displayName: 'MAFIA', backendType: 'werewolf', theme: 'theme-werewolf', minPlayers: 6, maxPlayers: 20,
    categoryLabel: 'Mode', categories: [{value:'standard',text:'Standard'},{value:'extended',text:'Extended'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>The village is infiltrated by Mafia! Find them before everyone dies.</p><h3>üë• Village Team</h3><div class="role-card"><div class="role-name">üë§ Villager</div><div class="role-desc">Find the Mafia through discussion!</div></div><div class="role-card"><div class="role-name">üëÅÔ∏è Seer</div><div class="role-desc">Check one player each night to learn their role.</div></div><div class="role-card"><div class="role-name">üíâ Doctor</div><div class="role-desc">Protect one player from death each night.</div></div><h3>üë• Mafia Team</h3><div class="role-card"><div class="role-name">üî™ Mafia</div><div class="role-desc">Kill villagers at night. Blend in by day!</div></div><h3>üéÆ Phases</h3><ol><li><strong>Night:</strong> Mafia kills, special roles act</li><li><strong>Day:</strong> Discuss and debate</li><li><strong>Vote:</strong> Execute one player</li></ol><h3>üèÜ Winning</h3><ul><li><strong>Village wins</strong> when all Mafia eliminated</li><li><strong>Mafia wins</strong> when they equal villagers</li></ul>',
    gameFile: '/games/squad/werewolf.html'
},
'imposter': {
    displayName: 'IMPOSTER', backendType: 'imposter', theme: 'theme-imposter', minPlayers: 4, maxPlayers: 10,
    categoryLabel: 'Word Pack', categories: [{value:'random',text:'üé≤ Random'},{value:'food',text:'üçï Food'},{value:'animals',text:'üêæ Animals'},{value:'places',text:'üó∫Ô∏è Places'},{value:'objects',text:'üì¶ Objects'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Everyone knows the secret word EXCEPT the Imposter. Find them!</p><h3>üéÆ How to Play</h3><ol><li>All players except ONE see the secret word</li><li>Each player gives a ONE-WORD clue</li><li>Imposter must bluff convincingly</li><li>Vote on who the Imposter is</li></ol><h3>üèÜ Winning</h3><ul><li><strong>Players win</strong> by catching the Imposter</li><li><strong>Imposter wins</strong> by escaping or guessing the word</li></ul>',
    gameFile: '/games/squad/imposter.html'
},
'fake-artist': {
    displayName: 'FAKE ARTIST', backendType: 'fake-artist', theme: 'theme-fake-artist', minPlayers: 4, maxPlayers: 10,
    categoryLabel: 'Category', categories: [{value:'random',text:'üé≤ Random'},{value:'animals',text:'üêæ Animals'},{value:'objects',text:'üì¶ Objects'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Everyone draws together, but the Fake Artist doesn\'t know what!</p><h3>üéÆ How to Play</h3><ol><li>Everyone except Fake Artist sees the word</li><li>Take turns adding ONE stroke to the canvas</li><li>Fake Artist must fake it!</li><li>Vote on who the Fake Artist is</li></ol><h3>üèÜ Winning</h3><ul><li><strong>Artists win</strong> by catching the Fake</li><li><strong>Fake wins</strong> by escaping or guessing the word</li></ul>',
    gameFile: '/games/squad/fake-artist.html'
},
'insider': {
    displayName: 'INSIDER', backendType: 'insider', theme: 'theme-insider', minPlayers: 4, maxPlayers: 8,
    categoryLabel: 'Difficulty', categories: [{value:'easy',text:'Easy'},{value:'medium',text:'Medium'},{value:'hard',text:'Hard'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>20 Questions - but the Insider secretly knows the answer!</p><h3>üë• Roles</h3><div class="role-card"><div class="role-name">üëë Master</div><div class="role-desc">Knows the word. Answers yes/no questions.</div></div><div class="role-card"><div class="role-name">üïµÔ∏è Insider</div><div class="role-desc">Also knows! Secretly guides the group.</div></div><div class="role-card"><div class="role-name">üë§ Citizens</div><div class="role-desc">Ask questions to find the word and Insider!</div></div><h3>üèÜ Winning</h3><ul><li>Word not guessed: Everyone loses</li><li>Insider caught: Citizens win</li><li>Insider escapes: Insider wins</li></ul>',
    gameFile: '/games/squad/insider.html'
},
'power-struggle': {
    displayName: 'POWER STRUGGLE', backendType: 'power-struggle', theme: 'theme-power-struggle', minPlayers: 3, maxPlayers: 10,
    categoryLabel: 'Coins', categories: [{value:'2',text:'2 Coins'},{value:'3',text:'3 Coins'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Bluff and eliminate! Last player with influence wins.</p><h3>üë• Characters</h3><div class="role-card"><div class="role-name">üëë Duke</div><div class="role-desc">Take 3 coins. Block Foreign Aid.</div></div><div class="role-card"><div class="role-name">üó°Ô∏è Assassin</div><div class="role-desc">Pay 3 to assassinate a card.</div></div><div class="role-card"><div class="role-name">üë∏ Contessa</div><div class="role-desc">Block assassinations.</div></div><div class="role-card"><div class="role-name">üé≠ Captain</div><div class="role-desc">Steal 2 coins. Block stealing.</div></div><h3>‚öîÔ∏è Bluffing</h3><p>Claim ANY character! If challenged and caught lying, lose a card. If truthful, THEY lose a card!</p>',
    gameFile: '/games/squad/power-struggle.html'
},
'codenames': {
    displayName: 'CODEWORDS', backendType: 'codenames', theme: 'theme-codenames', minPlayers: 4, maxPlayers: 20,
    categoryLabel: 'Pack', categories: [{value:'standard',text:'Standard'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Two teams race to find their agents using one-word clues!</p><h3>üéÆ Setup</h3><p>5x5 grid of words. Spymasters know which belong to each team, plus the Assassin!</p><h3>üéÆ How to Play</h3><ol><li>Spymaster gives ONE word + number</li><li>Team guesses words matching the clue</li><li>Correct = keep going. Wrong = turn ends</li><li>Assassin = instant loss!</li></ol><h3>üèÜ Winning</h3><p>First team to find all agents wins!</p>',
    gameFile: '/games/squad/codenames.html'
},
'wavelength': {
    displayName: 'SPECTRUM', backendType: 'wavelength', theme: 'theme-wavelength', minPlayers: 4, maxPlayers: 12,
    categoryLabel: 'Rounds', categories: [{value:'5',text:'5 Rounds'},{value:'8',text:'8 Rounds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Give clues to help your team find a hidden target on a spectrum!</p><h3>üéÆ How to Play</h3><ol><li>Spectrum appears (e.g., Cold ‚Üî Hot)</li><li>Clue-giver sees where target is hidden</li><li>Give ONE clue representing that position</li><li>Team guesses the position</li></ol><h3>üéØ Scoring</h3><ul><li>Bullseye: 4 points</li><li>Close: 3 points</li><li>Near: 2 points</li></ul>',
    gameFile: '/games/squad/wavelength.html'
},
'word-bomb': {
    displayName: 'WORD BOMB', backendType: 'word-bomb', theme: 'theme-word-bomb', minPlayers: 2, maxPlayers: 16,
    categoryLabel: 'Timer', categories: [{value:'easy',text:'Easy (8s)'},{value:'medium',text:'Medium (5s)'},{value:'hard',text:'Hard (3s)'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Type a word containing the given letters before the bomb explodes!</p><h3>üéÆ How to Play</h3><ol><li>Letter combo appears (e.g., "TH")</li><li>Type any word containing those letters</li><li>Be fast! Bomb is ticking!</li></ol><h3>üí£ Rules</h3><ul><li>Words can\'t be repeated</li><li>Bomb explodes = lose a life</li><li>Last player standing wins!</li></ul>',
    gameFile: '/games/squad/word-bomb.html'
},
'herd-mentality': {
    displayName: 'THINK ALIKE', backendType: 'herd-mentality', theme: 'theme-herd-mentality', minPlayers: 4, maxPlayers: 20,
    categoryLabel: 'Rounds', categories: [{value:'quick',text:'Quick (5)'},{value:'standard',text:'Standard (8)'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Match the majority answer to score points!</p><h3>üéÆ How to Play</h3><ol><li>Question appears</li><li>Everyone writes an answer</li><li>Most common answer wins!</li></ol><h3>üêÑ Pink Cow</h3><ul><li>Match majority: +1 point</li><li>Unique answer: Get the Pink Cow (blocks scoring!)</li></ul>',
    gameFile: '/games/squad/herd-mentality.html'
},
'categories': {
    displayName: 'CATEGORIES', backendType: 'categories', theme: 'theme-categories', minPlayers: 2, maxPlayers: 20,
    categoryLabel: 'Rounds', categories: [{value:'5',text:'5 Rounds'},{value:'10',text:'10 Rounds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Race to type valid answers first!</p><h3>üéÆ How to Play</h3><ol><li>Category appears</li><li>Type answer fast</li><li>First correct = most points</li></ol><h3>‚ö° Scoring</h3><ul><li>1st: 3 pts</li><li>2nd: 2 pts</li><li>3rd: 1 pt</li></ul>',
    gameFile: '/games/squad/categories.html'
},
'npat': {
    displayName: 'NAME PLACE ANIMAL THING', backendType: 'npat', theme: 'theme-npat', minPlayers: 2, maxPlayers: 20,
    categoryLabel: 'Timer', categories: [{value:'30',text:'30 Seconds'},{value:'45',text:'45 Seconds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Fill all four categories with the given letter!</p><h3>üìù Categories</h3><ul><li><strong>Name:</strong> Person\'s name</li><li><strong>Place:</strong> City/country</li><li><strong>Animal:</strong> Any animal</li><li><strong>Thing:</strong> Any object</li></ul><h3>‚ö° Scoring</h3><ul><li>Unique: 10 pts</li><li>Matching: 5 pts each</li></ul>',
    gameFile: '/games/squad/npat.html'
},
'word-association': {
    displayName: 'WORD CHAIN', backendType: 'word-association', theme: 'theme-word-association', minPlayers: 3, maxPlayers: 12,
    categoryLabel: 'Lives', categories: [{value:'2',text:'2 Lives'},{value:'3',text:'3 Lives'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Say related words without hesitating or repeating!</p><h3>üéÆ How to Play</h3><ol><li>Say a word related to the previous</li><li>Hesitate = OUT</li><li>Repeat = OUT</li></ol><h3>üîó Example</h3><p>Sun ‚Üí Beach ‚Üí Sand ‚Üí Castle ‚Üí King</p>',
    gameFile: '/games/squad/word-association.html'
},
'charades': {
    displayName: 'CHARADES', backendType: 'charades', theme: 'theme-charades', minPlayers: 4, maxPlayers: 20,
    categoryLabel: 'Category', categories: [{value:'mixed',text:'üé≤ Mixed'},{value:'movies',text:'üé¨ Movies'},{value:'actions',text:'üèÉ Actions'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Act out words using only gestures!</p><h3>üö´ Rules</h3><ul><li>NO talking or sounds</li><li>NO pointing at objects</li><li>Gestures only!</li></ul><h3>üëÜ Signals</h3><ul><li>Fingers up = number of words</li><li>Tap arm = syllables</li><li>Point to ear = "sounds like"</li></ul>',
    gameFile: '/games/squad/charades.html'
},
'celebrity': {
    displayName: 'CELEBRITY', backendType: 'celebrity', theme: 'theme-celebrity', minPlayers: 4, maxPlayers: 16,
    categoryLabel: 'Names Each', categories: [{value:'3',text:'3 Names'},{value:'5',text:'5 Names'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Guess names in three rounds of increasing difficulty!</p><h3>üéÆ Three Rounds</h3><div class="role-card"><div class="role-name">Round 1: Describe</div><div class="role-desc">Use any words except the name</div></div><div class="role-card"><div class="role-name">Round 2: One Word</div><div class="role-desc">Only ONE word allowed!</div></div><div class="role-card"><div class="role-name">Round 3: Charades</div><div class="role-desc">Act it out silently</div></div>',
    gameFile: '/games/squad/celebrity.html'
},
'fishbowl': {
    displayName: 'FISHBOWL', backendType: 'fishbowl', theme: 'theme-fishbowl', minPlayers: 6, maxPlayers: 20,
    categoryLabel: 'Words Each', categories: [{value:'3',text:'3 Words'},{value:'5',text:'5 Words'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Three games in one! Same words, three ways to guess.</p><h3>üéÆ Rounds</h3><div class="role-card"><div class="role-name">Round 1: Taboo</div><div class="role-desc">Describe without saying the word</div></div><div class="role-card"><div class="role-name">Round 2: Password</div><div class="role-desc">Only ONE word as clue</div></div><div class="role-card"><div class="role-name">Round 3: Charades</div><div class="role-desc">Act it out silently</div></div>',
    gameFile: '/games/squad/fishbowl.html'
},
'most-likely-to': {
    displayName: 'MOST LIKELY TO', backendType: 'most-likely-to', theme: 'theme-most-likely-to', minPlayers: 3, maxPlayers: 20,
    categoryLabel: 'Pack', categories: [{value:'clean',text:'Clean'},{value:'spicy',text:'Spicy'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Vote on who is most likely to do funny scenarios!</p><h3>üéÆ How to Play</h3><ol><li>Scenario appears</li><li>Vote for a player</li><li>Results revealed!</li></ol><h3>üèÜ Scoring</h3><p>Each vote = 1 point. Most votes wins!</p>',
    gameFile: '/games/party/most-likely-to.html'
},
'sketch-guess': {
    displayName: 'SKETCH & GUESS', backendType: 'sketch-guess', theme: 'theme-sketch-guess', minPlayers: 3, maxPlayers: 20,
    categoryLabel: 'Category', categories: [{value:'random',text:'üé≤ Random'},{value:'animals',text:'üêæ Animals'},{value:'custom',text:'‚úèÔ∏è Custom'}],
    showTwoSpies: false, showLocationPreview: false, showCustomWords: true, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>One draws, others guess! Faster = more points.</p><h3>üé® Rules</h3><ul><li>NO letters or numbers</li><li>NO talking</li></ul><h3>‚ö° Scoring</h3><ul><li>Fast guess: 500 pts</li><li>Medium: 300 pts</li><li>Slow: 100 pts</li></ul>',
    gameFile: '/games/squad/sketch-guess.html'
},
'fools-gold': {
    displayName: 'FOOLS GOLD', backendType: 'fools-gold', theme: 'theme-fools-gold', minPlayers: 3, maxPlayers: 12,
    categoryLabel: 'Category', categories: [{value:'mixed',text:'üé≤ Mixed'},{value:'history',text:'üìú History'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Write convincing fake trivia answers!</p><h3>üéÆ How to Play</h3><ol><li>Obscure question read</li><li>Write believable fake answer</li><li>Vote on what\'s real</li></ol><h3>üèÜ Scoring</h3><ul><li>Guess right: 200 pts</li><li>Fool someone: 100 pts each</li></ul>',
    gameFile: '/games/squad/fools-gold.html'
},
'broken-pictionary': {
    displayName: 'BROKEN PICTIONARY', backendType: 'broken-pictionary', theme: 'theme-broken-pictionary', minPlayers: 4, maxPlayers: 16,
    categoryLabel: 'Rounds', categories: [{value:'1',text:'1 Round'},{value:'2',text:'2 Rounds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Telephone but with drawing!</p><h3>üéÆ How to Play</h3><ol><li>Start with a phrase</li><li>Next player draws it</li><li>Next describes the drawing</li><li>Alternate until back to start</li></ol><h3>üòÇ The Reveal</h3><p>Watch hilarious transformations!</p>',
    gameFile: '/games/squad/broken-pictionary.html'
},
'doodle-duel': {
    displayName: 'DOODLE DUEL', backendType: 'doodle-duel', theme: 'theme-doodle-duel', minPlayers: 3, maxPlayers: 12,
    categoryLabel: 'Rounds', categories: [{value:'5',text:'5 Rounds'},{value:'8',text:'8 Rounds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Draw a prompt while others write fake titles!</p><h3>üéÆ How to Play</h3><ol><li>Drawer illustrates secret prompt</li><li>Others write fake titles</li><li>Vote for the real one</li></ol><h3>üèÜ Scoring</h3><ul><li>Guess correctly: 200 pts</li><li>Fool others: 100 pts each</li></ul>',
    gameFile: '/games/squad/doodle-duel.html'
},
'two-truths': {
    displayName: 'TWO TRUTHS', backendType: 'two-truths', theme: 'theme-two-truths', minPlayers: 3, maxPlayers: 16,
    categoryLabel: 'Mode', categories: [{value:'standard',text:'Standard'},{value:'spicy',text:'Spicy'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Spot the lie among two truths!</p><h3>üéÆ How to Play</h3><ol><li>Share 3 statements (2 true, 1 lie)</li><li>Others ask questions</li><li>Vote on which is the lie</li></ol><h3>üí° Tips</h3><ul><li>Make truths surprising</li><li>Make lie believable</li></ul>',
    gameFile: '/games/party/two-truths.html'
},
'ludo': {
    displayName: 'LUDO', backendType: 'ludo', theme: 'theme-ludo', minPlayers: 2, maxPlayers: 6,
    categoryLabel: 'Mode', categories: [{value:'classic',text:'Classic'},{value:'quick',text:'Quick'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: false,
    howToPlay: '<h3>üéØ Objective</h3><p>Race your 4 tokens home first!</p><h3>üéÆ How to Play</h3><ol><li>Roll 6 to leave base</li><li>Move clockwise</li><li>Roll 6 = bonus roll</li><li>Land on opponent = send back!</li></ol><h3>üèÜ Winning</h3><p>First to get all 4 home wins!</p>',
    gameFile: '/games/squad/ludo.html'
},
'punchline': {
    displayName: 'PUNCHLINE', backendType: 'punchline', theme: 'theme-punchline', minPlayers: 3, maxPlayers: 16,
    categoryLabel: 'Rounds', categories: [{value:'5',text:'5 Rounds'},{value:'8',text:'8 Rounds'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Write the funniest punchline!</p><h3>üéÆ How to Play</h3><ol><li>Setup/prompt appears</li><li>Write your punchline</li><li>Vote for favorites</li></ol><h3>üèÜ Scoring</h3><p>Each vote = 1 point!</p>',
    gameFile: '/games/party/punchline.html'
},
'trivia-royale': {
    displayName: 'TRIVIA ROYALE', backendType: 'trivia-royale', theme: 'theme-trivia-royale', minPlayers: 2, maxPlayers: 100,
    categoryLabel: 'Category', categories: [{value:'general',text:'General'},{value:'history',text:'History'},{value:'science',text:'Science'},{value:'popculture',text:'Pop Culture'},{value:'sports',text:'Sports'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Answer trivia faster than everyone!</p><h3>‚ö° Scoring</h3><ul><li>Correct + Fast: 1000 pts</li><li>Correct + Medium: 500 pts</li><li>Correct + Slow: 250 pts</li></ul>',
    gameFile: '/games/party/trivia-royale.html'
},
'this-or-that-party': {
    displayName: 'THIS OR THAT', backendType: 'this-or-that-party', theme: 'theme-this-or-that-party', minPlayers: 2, maxPlayers: 100,
    categoryLabel: 'Pack', categories: [{value:'mixed',text:'Mixed'},{value:'lifestyle',text:'Lifestyle'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Pick between two options and match majority!</p><h3>üéÆ How to Play</h3><ol><li>Two options appear</li><li>Pick one</li><li>Majority wins points!</li></ol>',
    gameFile: '/games/party/this-or-that-party.html'
},
'hot-takes-party': {
    displayName: 'HOT TAKES', backendType: 'hot-takes-party', theme: 'theme-hot-takes-party', minPlayers: 2, maxPlayers: 100,
    categoryLabel: 'Spice', categories: [{value:'mild',text:'Mild'},{value:'medium',text:'Medium'},{value:'spicy',text:'Spicy'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Rate statements and match the group average!</p><h3>üéÆ How to Play</h3><ol><li>Statement appears</li><li>Rate 1-5</li><li>Closer to average = more points!</li></ol>',
    gameFile: '/games/party/hot-takes-party.html'
},
'never-ever-party': {
    displayName: 'NEVER HAVE I EVER', backendType: 'never-ever-party', theme: 'theme-never-ever-party', minPlayers: 2, maxPlayers: 100,
    categoryLabel: 'Pack', categories: [{value:'clean',text:'Clean'},{value:'spicy',text:'Spicy'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Rare experiences score more!</p><h3>üéÆ How to Play</h3><ol><li>Statement appears</li><li>Vote I HAVE or NEVER</li></ol><h3>üèÜ Scoring</h3><p>Minority = more points!</p>',
    gameFile: '/games/party/never-ever-party.html'
},
'bet-or-bluff': {
    displayName: 'BET OR BLUFF', backendType: 'bet-or-bluff', theme: 'theme-bet-or-bluff', minPlayers: 2, maxPlayers: 100,
    categoryLabel: 'Points', categories: [{value:'500',text:'500 Points'},{value:'1000',text:'1000 Points'}],
    showTwoSpies: false, showLocationPreview: false, isPartyGame: true,
    howToPlay: '<h3>üéØ Objective</h3><p>Answer trivia and bet on your confidence!</p><h3>üéÆ How to Play</h3><ol><li>Answer question</li><li>Bet 0-100 points</li><li>Correct = win bet</li><li>Wrong = lose bet</li></ol>',
    gameFile: '/games/party/bet-or-bluff.html'
}
};


const LOCATION_PACKS={classic:['Airport','Bank','Beach','Casino','Hospital','Hotel','Military Base','Movie Studio','Pirate Ship','Police Station','Restaurant','School','Space Station','Submarine','Supermarket','Theater','University'],modern:['Coffee Shop','Gym','Shopping Mall','Tech Startup','Spa','Escape Room'],adult:['Strip Club','Vegas Casino','Hookah Lounge','Nightclub'],marvel:['Avengers Tower','Asgard','Wakanda','X-Mansion','Stark Industries'],dc:['Batcave','Fortress of Solitude','Arkham Asylum','Gotham City'],movies:['Hogwarts','Death Star','Jurassic Park','The Matrix'],medieval:['Castle','Tavern','Blacksmith','Monastery'],websites:['Reddit','YouTube','Discord','TikTok','Twitter'],popculture:['Squid Game','The Office','Stranger Things','Among Us'],anime:['U.A. High School','Hidden Leaf Village','Thousand Sunny'],horror:['Haunted Mansion','Overlook Hotel','Elm Street']};

const urlParams=new URLSearchParams(window.location.search),roomCode=urlParams.get('room')||localStorage.getItem('tempRoomCode'),playerName=localStorage.getItem('tempPlayerName'),isPremium=localStorage.getItem('tempIsPremium')==='true',myCosmetics=JSON.parse(localStorage.getItem('tempCosmetics')||'null'),myUserId=localStorage.getItem('tempUserId')||null;
let gameType=localStorage.getItem('tempGameType')||'spyfall',gameConfig=GAMES[gameType]||GAMES['spyfall'],isHost=localStorage.getItem('tempIsHost')==='true',currentRoom=null,myPlayerId=null,confirmCallback=null,joinAttempts=0;
if(!roomCode||!playerName)window.location.href='/lobby.html?game='+gameType;
document.body.className=gameConfig.theme;document.getElementById('room-code').textContent=roomCode||'------';document.getElementById('max-players').textContent=gameConfig.maxPlayers;updateGameUI();
const leaveBtn=document.getElementById('leave-btn');if(leaveBtn)leaveBtn.href=gameConfig.isPartyGame?'/party-games.html':'/squad-games.html';if(gameConfig.isPartyGame)document.body.classList.add('party-mode');

function attemptJoinRoom(){if(!roomCode||!playerName)return;joinAttempts++;socket.emit('rejoin-room',{roomCode,playerName,isPremium,cosmetics:myCosmetics,userId:myUserId})}
socket.on('connect',()=>{joinAttempts=0;attemptJoinRoom()});
socket.on('reconnect',()=>{joinAttempts=0;attemptJoinRoom()});
socket.on('room-joined',d=>{joinAttempts=0;handleRoomUpdate(d.room)});
socket.on('room-state',d=>{if(d.success)handleRoomUpdate(d.room)});
socket.on('player-joined',d=>handleRoomUpdate(d.room));
socket.on('player-disconnected',d=>handleRoomUpdate(d.room));
socket.on('player-kicked',d=>handleRoomUpdate(d.room));
socket.on('kicked',d=>{showConfirm('Kicked',d.message,()=>{window.location.href=gameConfig.isPartyGame?'/party-games.html':'/squad-games.html'},false)});
socket.on('host-left',d=>{showConfirm('Host Left',d.message,()=>{window.location.href=gameConfig.isPartyGame?'/party-games.html':'/squad-games.html'},false)});
socket.on('game-started',d=>{const gt=d.gameType||currentRoom?.gameType||gameType,cfg=GAMES[gt];if(cfg?.gameFile)window.location.href=cfg.gameFile+'?room='+roomCode;else showConfirm('Error','Game not found',()=>{window.location.href='/squad-games.html'},false)});
socket.on('error',d=>{if(d.message==='Room not found'&&joinAttempts<3)setTimeout(attemptJoinRoom,500);else if(d.message==='Room not found')showConfirm('Room Expired','Room no longer exists.',()=>{localStorage.removeItem('tempRoomCode');window.location.href='/lobby.html?game='+gameType},false);else showConfirm('Error',d.message,()=>{window.location.href='/lobby.html?game='+gameType},false)});
socket.on('join-error',d=>{showConfirm('Cannot Join',d.message,()=>{window.location.href='/lobby.html?game='+gameType},false)});

function handleRoomUpdate(room){currentRoom=room;if(room.gameType&&room.gameType!==gameType){gameType=room.gameType;gameConfig=GAMES[gameType]||GAMES['spyfall'];document.body.className=gameConfig.theme;if(gameConfig.isPartyGame)document.body.classList.add('party-mode');updateGameUI()}const me=room.players.find(p=>p.name===playerName);if(me){myPlayerId=me.id;isHost=me.isHost}updatePlayersList(room.players);document.getElementById('player-count').textContent=room.players.length;if(isHost){document.getElementById('settings-section').style.display='block';document.getElementById('start-btn').style.display='block';document.getElementById('waiting-message').style.display='none';if(room.players.length<gameConfig.minPlayers){document.getElementById('min-warning').style.display='block';document.getElementById('min-players').textContent=gameConfig.minPlayers;document.getElementById('start-btn').disabled=true}else{document.getElementById('min-warning').style.display='none';document.getElementById('start-btn').disabled=false}const ts=document.getElementById('two-spies');if(ts){ts.disabled=room.players.length<5;if(room.players.length<5)ts.checked=false}}else{document.getElementById('settings-section').style.display='none';document.getElementById('start-btn').style.display='none';document.getElementById('waiting-message').style.display='block';document.getElementById('min-warning').style.display='none'}}

function updatePlayersList(players){const list=document.getElementById('players-list');if(!players.length){list.innerHTML='<div class="players-empty">No players yet</div>';return}let html='';if(gameConfig.isPartyGame){const hasEnough=players.length>=gameConfig.minPlayers;html+=`<div class="party-player-count"><div><div class="count-number">${players.length}</div><div class="count-label">Players</div></div><div class="count-status ${hasEnough?'ready':''}">${hasEnough?'‚úì Ready!':'Need '+(gameConfig.minPlayers-players.length)+' more'}</div></div>`}html+=players.map((p,i)=>{const isMe=p.name===playerName,init=p.name.replace(/[^a-zA-Z]/g,'')[0]?.toUpperCase()||'?';return`<div class="player-item ${p.isHost?'is-host':''} ${isMe?'is-me':''}" style="animation-delay:${i*0.05}s"><div class="player-info"><div class="player-avatar">${p.isHost?'‚òÖ':init}</div><span class="player-name ${p.isPremium?'premium':''}">${escapeHtml(p.name)}</span></div><div class="player-badges">${p.isHost?'<span class="badge badge-host">Host</span>':''}${isMe?'<span class="badge badge-you">You</span>':''}${isHost&&!p.isHost?`<button class="kick-btn" onclick="kickPlayer('${p.id}','${escapeHtml(p.name)}')">Kick</button>`:''}</div></div>`}).join('');list.innerHTML=html}

function updateGameUI(){document.getElementById('game-title').textContent=gameConfig.displayName;document.getElementById('modal-title').textContent='How to Play '+gameConfig.displayName;document.getElementById('modal-body').innerHTML=gameConfig.howToPlay;document.getElementById('max-players').textContent=gameConfig.maxPlayers;document.title=gameConfig.displayName+' - TheGaming.co';document.getElementById('category-label').textContent=gameConfig.categoryLabel;document.getElementById('category-select').innerHTML=gameConfig.categories.map(c=>`<option value="${c.value}">${c.text}</option>`).join('');document.getElementById('two-spies-group').style.display=gameConfig.showTwoSpies?'block':'none';document.getElementById('custom-words-group').style.display='none';if(gameConfig.showLocationPreview)updateLocationPreview();else document.getElementById('location-preview').style.display='none'}
function updateLocationPreview(){if(!gameConfig.showLocationPreview)return;const cat=document.getElementById('category-select').value,preview=document.getElementById('location-preview'),tags=document.getElementById('location-tags');if(cat==='random'){preview.style.display='block';tags.innerHTML='<span class="location-tag">All packs combined</span>'}else if(LOCATION_PACKS[cat]){preview.style.display='block';const locs=LOCATION_PACKS[cat];tags.innerHTML=locs.slice(0,8).map(l=>`<span class="location-tag">${l}</span>`).join('')+(locs.length>8?`<span class="location-tag">+${locs.length-8} more</span>`:'')}else preview.style.display='none'}
function updateCustomWordsVisibility(){const cat=document.getElementById('category-select').value,cg=document.getElementById('custom-words-group');if(cg&&gameConfig?.showCustomWords)cg.style.display=cat==='custom'?'block':'none'}

function copyRoomCode(){navigator.clipboard.writeText(roomCode);const btn=document.getElementById('copy-code-btn');btn.classList.add('copied');btn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Copied';setTimeout(()=>{btn.classList.remove('copied');btn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy Code'},2000)}
function copyLink(){const gid=Object.entries(GAMES).find(([k,v])=>v.backendType===gameType)?.[0]||gameType,link=window.location.origin+'/lobby.html?game='+gid+'&join='+roomCode;navigator.clipboard.writeText(link);const btn=document.getElementById('copy-link-btn');btn.classList.add('copied');btn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Copied';setTimeout(()=>{btn.classList.remove('copied');btn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Copy Link'},2000)}
function kickPlayer(id,name){showConfirm('Kick Player','Remove '+name+'?',()=>socket.emit('kick-player',{roomCode,playerId:id}))}
function startGame(){let cat=document.getElementById('category-select').value;const ts=document.getElementById('two-spies')?.checked||false;if(cat==='custom')cat='custom:'+document.getElementById('custom-words')?.value||'';localStorage.setItem('tempCategory',cat);showConfirm('Start Game','Everyone ready?',()=>socket.emit('start-game',{roomCode,category:cat,twoSpies:ts}))}

function showHowToPlay(){document.getElementById('how-to-play-modal').classList.add('visible')}
function closeModal(id){document.getElementById(id).classList.remove('visible')}
function showConfirm(title,msg,cb,showCancel=true){document.getElementById('confirm-title').textContent=title;document.getElementById('confirm-message').textContent=msg;document.getElementById('confirm-modal').classList.add('visible');document.querySelector('#confirm-modal .cancel').style.display=showCancel?'block':'none';confirmCallback=cb}
function confirmAction(){closeModal('confirm-modal');if(confirmCallback)confirmCallback()}
document.querySelectorAll('.modal-overlay').forEach(o=>{o.addEventListener('click',e=>{if(e.target===o)o.classList.remove('visible')})});
function escapeHtml(t){const d=document.createElement('div');d.textContent=t;return d.innerHTML}
window.addEventListener('beforeunload',()=>socket.disconnect());
</script>
<script src="/header.js"></script>
</body>
</html>
