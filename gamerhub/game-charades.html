<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Couples Charades - PlayHub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* All Base Styles (from 21 Questions) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #fafbff; color: #1a1a1a; overflow-x: hidden; position: relative; min-height: 100vh; }
        h1, h2, h3 { font-family: 'Bebas Neue', sans-serif; letter-spacing: 1px; }

        /* Animated background blobs (Copied directly for consistency) */
        .bg-shape { position: fixed; pointer-events: none; z-index: 0; opacity: 0.6; }
        .shape-1 { top: -80px; right: -80px; width: 350px; height: 350px; background: linear-gradient(135deg, #ff6b9d30 0%, #c4456930 100%); border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; animation: morph 10s ease-in-out infinite; }
        .shape-2 { top: 50%; left: -120px; width: 300px; height: 300px; background: linear-gradient(135deg, #ff6b9d30 0%, #c4456930 100%); border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; animation: morph 12s ease-in-out infinite reverse; }
        .shape-3 { bottom: -80px; right: 15%; width: 280px; height: 280px; background: linear-gradient(135deg, #ff6b9d30 0%, #c4456930 100%); border-radius: 50% 50% 30% 70% / 50% 50% 70% 30%; animation: morph 14s ease-in-out infinite; }
        @keyframes morph { 0%, 100% { border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; transform: rotate(0deg); } 50% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; transform: rotate(5deg); } }

        .container { max-width: 900px; margin: 0 auto; padding: 0 40px; position: relative; z-index: 1; min-height: 100vh; display: flex; flex-direction: column; }
        
        /* Navigation */
        nav { padding: 30px 0; display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #1a1a1a; margin-bottom: 40px; position: relative; z-index: 10; }
        .logo-nav { font-family: 'Bebas Neue', sans-serif; font-size: 2.1rem; letter-spacing: 2px; color: #1a1a1a; text-decoration: none; }
        .back-btn { display: inline-flex; align-items: center; gap: 8px; color: #666; text-decoration: none; font-weight: 700; font-size: 0.95rem; transition: color 0.3s ease; }
        .back-btn:hover { color: #1a1a1a; }

        /* General Content */
        .game-content { flex: 1; display: flex; flex-direction: column; padding-bottom: 60px; }
        .hidden { display: none !important; }

        /* --- SCREEN STYLES (Category, Pack Selection) --- */
        .selection-screen { max-width: 800px; margin: 40px auto; }
        .selection-header { text-align: center; margin-bottom: 50px; }
        .selection-header h2 { font-size: 4.5rem; line-height: 1; margin-bottom: 15px; text-shadow: 2px 2px 0 rgba(255, 107, 157, 0.2); }
        .selection-header p { font-size: 1.2rem; color: #666; font-weight: 500; }
        
        /* ADJUSTED GRID FOR 6 CATEGORIES */
        .selection-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        
        .selection-card { background: white; border: 3px solid #1a1a1a; padding: 40px 30px; cursor: pointer; transition: all 0.3s ease; box-shadow: 5px 5px 0 #e0e0e0; text-align: center; }
        .selection-card:hover { transform: translate(2px, -2px); box-shadow: 3px 3px 0 #e0e0e0; }
        .selection-icon { font-size: 3rem; margin-bottom: 15px; }
        .selection-card h3 { font-size: 2rem; margin-bottom: 10px; line-height: 1; }
        .selection-description { font-size: 0.95rem; color: #666; margin-bottom: 12px; font-weight: 500; line-height: 1.5; }

        /* Pack Specific Styles */
        .packs-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .pack-card { background: white; border: 3px solid #1a1a1a; padding: 35px 25px; cursor: pointer; transition: all 0.3s ease; box-shadow: 5px 5px 0 #e0e0e0; text-align: center; }
        .pack-number { font-family: 'Bebas Neue', sans-serif; font-size: 3rem; color: #ff6b9d; margin-bottom: 10px; line-height: 1; }
        .pack-questions { font-family: 'Bebas Neue', sans-serif; font-size: 0.9rem; color: #666; letter-spacing: 1px; }

        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #666; text-decoration: none; font-weight: 700; font-size: 0.95rem; cursor: pointer; margin-bottom: 30px; }
        .back-link:hover { color: #1a1a1a; }

        /* --- GAME SCREEN STYLES --- */
        .game-screen { display: none; }
        .progress-bar-container { background: white; border: 3px solid #1a1a1a; padding: 8px; margin-bottom: 40px; box-shadow: 4px 4px 0 #e0e0e0; }
        .progress-bar { height: 12px; background: #f0f0f0; position: relative; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%); transition: width 0.3s ease; }
        .game-header { text-align: center; margin-bottom: 40px; position: relative; }
        .quit-btn { position: absolute; right: 0; top: 0; background: white; border: 2px solid #1a1a1a; padding: 8px 20px; font-family: 'Bebas Neue', sans-serif; font-size: 1rem; letter-spacing: 1px; cursor: pointer; transition: all 0.3s ease; color: #666; }
        .quit-btn:hover { background: #f0f0f0; color: #1a1a1a; }
        
        .mode-label { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; color: #ff6b9d; letter-spacing: 2px; margin-bottom: 8px; }
        .prompt-counter { font-family: 'Bebas Neue', sans-serif; font-size: 1.3rem; color: #666; letter-spacing: 1px; }

        /* Player Turn Card */
        .turn-card { 
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            color: white; 
            border: 4px solid #8b2e47; 
            box-shadow: 8px 8px 0 #8b2e47; 
            padding: 60px 50px; 
            margin-bottom: 40px;
            min-height: 280px; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            text-align: center;
        }

        .turn-card h3 {
            font-size: 3rem;
            margin-bottom: 20px;
            line-height: 1;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        .turn-instruction {
            font-size: 1.2rem;
            font-weight: 500;
        }

        /* Prompt Reveal Card */
        .prompt-card { 
            background: #1a1a1a;
            color: #1a1a1a; 
            border: 4px solid #1a1a1a; 
            padding: 60px 50px; 
            margin-bottom: 40px; 
            box-shadow: 8px 8px 0 #e0e0e0; 
            min-height: 280px; 
            display: none; /* Starts hidden */
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            transition: all 0.5s ease;
        }

        .prompt-text { 
            font-size: 1.8rem; 
            line-height: 1.5; 
            text-align: center; 
            font-weight: 600; 
            color: #1a1a1a; /* Obscured by default */
            transition: color 0.5s ease;
        }

        .prompt-card.revealed {
            background: white; 
        }

        .prompt-card.revealed .prompt-text {
             color: #1a1a1a !important; 
        }
        
        .reveal-btn {
            background: #1a1a1a;
            color: white;
            border-color: #1a1a1a;
            box-shadow: 5px 5px 0 #e0e0e0;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .reveal-btn:hover:not(:disabled) {
            transform: translate(2px, -2px);
            box-shadow: 3px 3px 0 #e0e0e0;
        }

        .navigation { display: flex; gap: 15px; }
        .nav-btn { flex: 1; padding: 18px 30px; font-size: 1.2rem; font-family: 'Bebas Neue', sans-serif; letter-spacing: 1px; border: 3px solid #1a1a1a; cursor: pointer; transition: all 0.3s ease; }
        .nav-btn.prev { background: white; color: #1a1a1a; box-shadow: 5px 5px 0 #e0e0e0; }
        .nav-btn.prev:hover:not(:disabled) { transform: translate(2px, -2px); box-shadow: 3px 3px 0 #e0e0e0; }
        .nav-btn.next { background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%); color: white; border-color: #8b2e47; box-shadow: 5px 5px 0 #8b2e47; }
        .nav-btn.next:hover:not(:disabled) { transform: translate(2px, -2px); box-shadow: 3px 3px 0 #8b2e47; }
        .nav-btn:disabled { opacity: 0.4; cursor: not-allowed; }

        /* End Screen (Copied from 21 Questions) */
        .end-screen { display: none; text-align: center; max-width: 700px; margin: 80px auto; }
        .end-screen h2 { font-size: 5.5rem; line-height: 1; margin-bottom: 30px; text-shadow: 3px 3px 0 rgba(255, 107, 157, 0.2); }
        .end-message { font-size: 1.3rem; line-height: 1.8; color: #666; margin-bottom: 50px; font-weight: 500; }
        .end-actions { display: flex; flex-direction: column; gap: 15px; }
        .action-btn { padding: 18px 40px; font-size: 1.3rem; font-family: 'Bebas Neue', sans-serif; letter-spacing: 1px; border: 3px solid #1a1a1a; cursor: pointer; transition: all 0.3s ease; }
        .action-btn.primary { background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%); color: white; border-color: #8b2e47; box-shadow: 5px 5px 0 #8b2e47; }
        .action-btn.secondary { background: white; color: #1a1a1a; box-shadow: 5px 5px 0 #e0e0e0; }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container { padding: 0 20px; }
            .selection-header h2, .end-screen h2 { font-size: 3.5rem; }
            /* 3-column grid switches to 1 column on mobile */
            .selection-grid { grid-template-columns: 1fr; } 
            .packs-grid { grid-template-columns: 1fr; }
            .quit-btn { position: static; margin-bottom: 15px; display: block; width: 100%; }
            .prompt-text { font-size: 1.4rem; }
            .turn-card, .prompt-card { padding: 40px 30px; min-height: 240px; }
            .turn-card h3 { font-size: 2.2rem; }
            .nav-btn { font-size: 1.1rem; padding: 15px 20px; }
        }
    </style>
</head>
<body>
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>
    <div class="bg-shape shape-3"></div>

    <div class="container">
        <nav>
            <a href="index.html" class="logo-nav">PLAYHUB</a>
            <a href="date-night.html" class="back-btn">
                ‚Üê Back to Games
            </a>
        </nav>

        <div class="game-content">
            
            <div class="selection-screen" id="categorySelection">
                <div class="selection-header">
                    <h2>CHOOSE YOUR VIBE</h2>
                    <p>Pick a category, then select a pack of Charades prompts to act out.</p>
                </div>

                <div class="selection-grid">
                    
                    <div class="selection-card" onclick="showPacks('silly')">
                        <div class="selection-icon">üòÇ</div>
                        <h3>SILLY & RANDOM</h3>
                        <p class="selection-description">Stupid, funny actions and objects for hilarious guesses.</p>
                    </div>

                    <div class="selection-card" onclick="showPacks('romance')">
                        <div class="selection-icon">üíï</div>
                        <h3>LOVE & ROMANCE</h3>
                        <p class="selection-description">Sophisticated, heartfelt, or cute concepts for connection.</p>
                    </div>
                    
                    <div class="selection-card" onclick="showPacks('sexy')">
                        <div class="selection-icon">üî•</div>
                        <h3>FLIRTY & SEXY</h3>
                        <p class="selection-description">Sensual, intimate, or slightly naughty prompts to spice things up.</p>
                    </div>
                    
                    <div class="selection-card" onclick="showPacks('pop-culture')">
                        <div class="selection-icon">üé¨</div>
                        <h3>POP CULTURE & MEDIA</h3>
                        <p class="selection-description">Famous scenes, characters, songs, and celebrity moments.</p>
                    </div>

                    <div class="selection-card" onclick="showPacks('nostalgia')">
                        <div class="selection-icon">üß∏</div>
                        <h3>CHILDHOOD & NOSTALGIA</h3>
                        <p class="selection-description">Relive old school yard games, childhood habits, and memories.</p>
                    </div>

                    <div class="selection-card" onclick="showPacks('fantasy')">
                        <div class="selection-icon">‚ú®</div>
                        <h3>FUTURE & FANTASY</h3>
                        <p class="selection-description">Sci-fi scenarios, winning big, or dream goals and achievements.</p>
                    </div>

                </div>
            </div>

            <div class="selection-screen hidden" id="packSelection">
                <span class="back-link" onclick="backToCategories()">‚Üê Back to Categories</span>
                
                <div class="selection-header">
                    <h2 id="packCategoryTitle"></h2>
                    <p>Choose a pack of 20 prompts</p>
                </div>

                <div class="packs-grid" id="packsGrid">
                    </div>
            </div>

            <div class="game-screen" id="gameScreen">
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <div class="game-header">
                    <button class="quit-btn" onclick="quitToPacks()">QUIT</button>
                    <div class="mode-label" id="modeTitle">CHARADES (ACTING)</div>
                    <div class="prompt-counter" id="promptCounter">PROMPT 1 OF 20</div>
                </div>

                <div class="turn-card" id="turnCard">
                    <h3 id="turnPlayer">PASS TO PLAYER 1</h3>
                    <p class="turn-instruction" id="turnInstruction">
                        Player 1, click 'SHOW PROMPT' below once the other player looks away. You are ACTING.
                    </p>
                    <button class="reveal-btn" id="showPromptBtn" onclick="showPromptCard()">SHOW PROMPT</button>
                </div>

                <div class="prompt-card" id="promptCard">
                    <p class="prompt-text" id="promptText"></p>
                </div>

                <div class="navigation">
                    <button class="nav-btn prev" id="prevBtn" onclick="previousPrompt()">‚Üê PREVIOUS</button>
                    <button class="nav-btn next" id="nextBtn" onclick="nextPrompt()">GUESSED! ‚Üí</button>
                </div>
            </div>

            <div class="end-screen" id="endScreen">
                <h2>YOU DID IT! üéâ</h2>
                <p class="end-message">
                    Great connection and acting! Try another pack.
                </p>
                <div class="end-actions">
                    <button class="action-btn primary" onclick="backToPackSelection()">TRY ANOTHER PACK</button>
                    <button class="action-btn secondary" onclick="backToGames()">BACK TO DATE NIGHT</button>
                </div>
            </div>
        </div>

        <footer>
            </footer>
    </div>

    <script>
        // --- GAME STATE & DATA ---
        let currentPromptIndex = 0;
        let currentCategory = '';
        let currentPack = '';
        let currentPrompts = [];
        let currentPlayer = 1; // Start with Player 1
        const TOTAL_PROMPTS = 20; // 20 prompts per pack

        const categoryTitles = {
            'silly': 'SILLY & RANDOM',
            'romance': 'LOVE & ROMANCE',
            'sexy': 'FLIRTY & SEXY',
            'pop-culture': 'POP CULTURE & MEDIA',
            'nostalgia': 'CHILDHOOD & NOSTALGIA',
            'fantasy': 'FUTURE & FANTASY'
        };
        
        // --- CHARADES PROMPT BANKS (3 PACKS OF 20 PROMPTS EACH) ---
        const charadesPrompts = {
            silly: {
                pack1: [ "Trying to assemble IKEA furniture", "A cat demanding food", "A very clumsy waiter", "Singing terribly in the shower", "Trying to parallel park", "Eating a giant messy burger", "A nervous public speaker", "Running for a bus", "Doing the laundry (and failing)", "A bird hitting a window", "Shaking a can of soda", "An opera singer breaking glass", "Trying to put on tight jeans", "A chef tasting bad food", "An awkward first date hug", "Invisible box challenge", "A ghost haunting a small room", "A dog chasing its own tail", "Getting tangled in Christmas lights", "A celebrity signing an autograph"],
                pack2: [ "A bad marriage proposal", "A mime trapped in a box", "Trying to wake up gracefully", "Sneaking a snack in the kitchen", "Waving at the wrong person", "Being chased by a swarm of bees", "An evil villain monologue", "Trying to fold a fitted sheet", "A vampire scared of a cross", "Dancing to a polka", "A baby throwing a tantrum", "Tasting something sour", "Trying to open a jar", "A superhero flying away awkwardly", "Stepping on a lego", "Catching a massive fish", "A robot malfunctioning", "A waiter dropping a tray", "A person walking on a windy day", "Trying to sneeze quietly"],
                pack3: [ "A very dramatic death scene", "A clumsy gymnast", "A monkey peeling a banana", "Being late for a flight", "An athlete scoring a goal", "A chef making pasta", "Falling down the stairs", "A person stuck in quicksand", "Trying to fit into old clothes", "A dog wearing a sweater", "A bad magician doing a trick", "A person trying to juggle", "Tipping over a canoe", "A tourist taking too many photos", "Slipping on ice", "Trying to fix a jammed printer", "A ghost trying to scare someone", "A cat cleaning itself", "Getting stuck in a revolving door", "A person searching for their keys"]
            },
            romance: {
                pack1: [ "Making out in the rain", "The first time we met", "Stolen kiss on a rooftop", "Planning our future home", "Couple's inside joke", "A surprise romantic getaway", "Having a deep conversation", "Writing a love letter", "Getting engaged", "Cuddling on the couch", "Sharing an umbrella", "A romantic picnic date", "Dancing slowly at a wedding", "Making breakfast in bed", "A perfect date night", "Warming my cold hands", "A big, heartfelt apology", "Gifting flowers", "Sharing a single scoop of ice cream", "Watching the sunset together"],
                pack2: [ "Sharing headphones on a trip", "Your favorite memory of me", "A candlelit dinner", "Helping each other study", "A thoughtful surprise gift", "A long goodbye hug", "Walking hand-in-hand", "A trip to Paris", "Building a snowman together", "An awkward teenage crush", "Watching a sad movie together", "A long-distance call", "Whispering a secret", "Waking up next to you", "A romantic slow dance", "Making up after an argument", "A late-night talk", "Planning a future bucket list", "A tender forehead kiss", "Holding hands during a movie"],
                pack3: [ "A cheesy public proposal", "My biggest pet peeve", "Comforting me after a bad day", "The moment I fell for you", "Our favorite place to eat", "Discussing our life goals", "Forgiving a mistake", "A passionate debate", "Buying groceries together", "Folding laundry together", "Sharing a childhood fear", "A couple's massage", "Building a fort in the living room", "A midnight snack run", "A tender forehead kiss", "Giving a sweet compliment", "Snuggling after a fight", "Making up our own language", "Singing in the car together", "My worst habit"]
            },
            sexy: {
                pack1: [ "A slow, sensual dance", "Whispering a secret fantasy", "Trying on sexy lingerie", "A shower together", "Giving a deep neck massage", "A passionate kiss", "The biggest turn-on", "Being seductive", "Waking up spooning", "A strip tease", "A secret kiss in public", "A romantic fantasy scenario", "Body shots", "Kissing your neck slowly", "A secret desire", "A provocative wink", "A candlelit bath", "A slow body trace", "Being caught in the act", "Flirting across the room"],
                pack2: [ "Undressing slowly", "Taking a naughty selfie", "A game of Truth or Dare (spicy)", "Biting your lip", "A lingering touch on the thigh", "Getting dressed after intimacy", "The most attractive piece of clothing", "A sexy power walk", "Giving a back scratch", "A slow tease", "A late night confession", "A body rub with lotion", "Tasting champagne off your skin", "A dirty talk moment", "Using a blindfold", "Dancing very close", "Touching my favorite spot", "A shower scene", "A secret signal for intimacy", "My most confident look"],
                pack3: [ "A private dance just for you", "A provocative glance", "Kissing down the back", "Whipping cream challenge", "A fantasy role play", "A dominant move", "Waking up naked", "The hottest part of my body", "A naughty whisper in the ear", "A spontaneous moment", "Taking off a shirt smoothly", "A jealous stare", "My favorite part of your body", "A confident stance", "A sexy wink", "A sensual lick", "Running your hands through my hair", "A slow, deep kiss", "My favorite spot to be kissed", "A long, meaningful hug after sex"]
            },
            'pop-culture': {
                pack1: [ "Tearful Oscar acceptance speech", "A celebrity hiding from the paparazzi", "The music video Thriller", "A character getting a red card", "Opening a magic portal", "A popular TikTok dance", "The famous Titanic scene", "A magician pulling a rabbit out of a hat", "A villain twirling a mustache", "A person winning the lottery", "A news anchor reading a teleprompter", "A famous painting (e.g., Mona Lisa)", "Trying to act cool on a red carpet", "Being ghosted", "A person binge-watching TV", "The movie Jaws", "The scene from The Matrix", "Drinking wine dramatically", "A person taking a selfie", "Rapping fast"],
                pack2: [], // Empty packs for launch
                pack3: [] // Empty packs for launch
            },
            'nostalgia': {
                pack1: [ "Jumping rope", "Riding a bicycle with no hands", "Playing hopscotch", "Tasting a sour candy", "Building a sandcastle", "Trying to beat a video game boss", "Waiting for the school bus", "Hiding under the covers with a flashlight", "Getting caught sneaking out", "A teacher writing on a blackboard", "A parent reading a bedtime story", "Sharing secrets over a sleepover", "Putting a puzzle together", "Singing into a hairbrush microphone", "Learning to tie shoes", "Getting grounded", "Waiting for the ice cream truck", "Playing tag", "Passing notes in class", "Sneaking food to a pet"],
                pack2: [], // Empty packs for launch
                pack3: [] // Empty packs for launch
            },
            'fantasy': {
                pack1: [ "A robot rebellion", "Finding a hidden treasure map", "Living on Mars", "Flying a spaceship", "Time travel accident", "Meeting an alien", "Winning the Nobel Prize", "A future mode of transportation", "A genie granting three wishes", "Building a successful tech startup", "Curing a disease", "Surviving a zombie apocalypse", "A unicorn prancing", "A person with psychic powers", "Creating a new holiday tradition", "Discovering a new planet", "A dragon hoarding gold", "Teleporting somewhere embarrassing", "A politician making a promise", "Living in a smart house"],
                pack2: [], // Empty packs for launch
                pack3: [] // Empty packs for launch
            }
        };

        // --- CORE GAME FUNCTIONS ---

        function init() {
            // Start directly at Category Selection
            document.getElementById('categorySelection').style.display = 'block';
        }

        function showPacks(categoryId) {
            currentCategory = categoryId;
            document.getElementById('categorySelection').classList.add('hidden');
            document.getElementById('packSelection').classList.remove('hidden');
            
            document.getElementById('packCategoryTitle').textContent = categoryTitles[categoryId];
            
            // Dynamically generate pack cards (3 packs)
            const packsGrid = document.getElementById('packsGrid');
            packsGrid.innerHTML = '';
            
            // Check if packs exist for this category
            const categoryPacks = charadesPrompts[categoryId];
            const packKeys = Object.keys(categoryPacks);

            for (let i = 0; i < 3; i++) {
                const packId = packKeys[i];
                const promptsCount = categoryPacks[packId] ? categoryPacks[packId].length : 0;
                
                let packCard;
                if (promptsCount > 0) {
                    // Active Pack
                    packCard = `
                        <div class="pack-card" onclick="selectPack('${packId}')">
                            <div class="pack-number">${i + 1}</div>
                            <h3>PACK ${i + 1}</h3>
                            <p class="pack-questions">${promptsCount} PROMPTS</p>
                        </div>
                    `;
                } else {
                    // Coming Soon Packs
                    packCard = `
                        <div class="pack-card" style="opacity: 0.6; cursor: not-allowed;">
                            <div class="pack-number">${i + 1}</div>
                            <h3>PACK ${i + 1}</h3>
                            <p class="pack-questions">COMING SOON</p>
                        </div>
                    `;
                }
                packsGrid.innerHTML += packCard;
            }
        }

        function selectPack(packId) {
            currentPack = packId;
            // Pull prompts only from the CHARADES bank
            currentPrompts = charadesPrompts[currentCategory][packId];
            
            // Safety check for empty packs (shouldn't happen if logic above is right, but good practice)
            if (currentPrompts.length === 0) {
                 alert(`Pack ${packId.replace('pack', '')} is currently empty. Please choose an active pack.`);
                 return;
            }

            currentPromptIndex = 0;
            currentPlayer = 1; // Reset to Player 1 for new game
            
            document.getElementById('packSelection').classList.add('hidden');
            document.getElementById('gameScreen').style.display = 'block';
            
            document.getElementById('modeTitle').textContent = 'CHARADES (ACTING)'; // Fixed label
            
            updateDisplay();
        }

        function updateDisplay() {
            const totalPrompts = currentPrompts.length;
            const promptsPlayed = currentPromptIndex + 1;
            const progress = (promptsPlayed / totalPrompts) * 100;
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('promptCounter').textContent = `PROMPT ${promptsPlayed} OF ${totalPrompts}`;
            
            // Update Turn Card Info
            document.getElementById('turnPlayer').textContent = `PASS TO PLAYER ${currentPlayer}`;
            document.getElementById('turnInstruction').textContent = `Player ${currentPlayer}, click 'SHOW PROMPT' below once the other player looks away. You are ACTING.`;
            
            // Set prompt text (still obscured)
            document.getElementById('promptText').textContent = currentPrompts[currentPromptIndex];
            
            // Show the turn card, hide the prompt card
            document.getElementById('turnCard').style.display = 'flex';
            document.getElementById('promptCard').style.display = 'none';
            document.getElementById('promptCard').classList.remove('revealed');

            // Disable previous button if at the start
            document.getElementById('prevBtn').disabled = currentPromptIndex === 0;
            document.getElementById('nextBtn').textContent = currentPromptIndex === totalPrompts - 1 ? 'FINISH' : 'GUESSED! ‚Üí';
        }
        
        function showPromptCard() {
             // Hide the turn card and show the prompt card
            document.getElementById('turnCard').style.display = 'none';
            document.getElementById('promptCard').style.display = 'flex';
            document.getElementById('promptCard').classList.add('revealed');
        }

        function nextPrompt() {
            // Logic only runs when the prompt card is showing (meaning player revealed it)
            if (document.getElementById('promptCard').style.display === 'flex') {
                if (currentPromptIndex === currentPrompts.length - 1) {
                    showEndScreen();
                } else {
                    currentPromptIndex++;
                    // Swap player turn for the next prompt (1 -> 2, 2 -> 1)
                    currentPlayer = currentPlayer === 1 ? 2 : 1; 
                    updateDisplay();
                }
            } else {
                 // Prevent accidental advance if on turn card
                 alert("Please click 'SHOW PROMPT' first to reveal the challenge.");
            }
        }

        function previousPrompt() {
            if (currentPromptIndex > 0) {
                // Do not change player on 'PREVIOUS', just the prompt
                currentPromptIndex--;
                updateDisplay();
            }
        }

        // --- BACK/QUIT FUNCTIONS ---
        
        function backToCategories() {
            document.getElementById('packSelection').classList.add('hidden');
            document.getElementById('categorySelection').classList.remove('hidden');
        }

        function quitToPacks() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('packSelection').classList.remove('hidden');
            currentPromptIndex = 0;
        }

        function showEndScreen() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('endScreen').style.display = 'block';
        }

        function backToPackSelection() {
            document.getElementById('endScreen').style.display = 'none';
            document.getElementById('packSelection').classList.remove('hidden');
            currentPromptIndex = 0;
        }

        function backToGames() {
            window.location.href = 'date-night.html';
        }

        // --- KEYBOARD NAVIGATION (Right arrow reveals, then advances) ---
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('gameScreen').style.display === 'block') {
                if (e.key === 'ArrowRight') {
                    if (document.getElementById('turnCard').style.display !== 'none') {
                        // If on turn card, reveal prompt
                        showPromptCard();
                    } else {
                        // If on prompt card, advance to next turn
                        nextPrompt();
                    }
                } else if (e.key === 'ArrowLeft' && currentPromptIndex > 0) {
                    previousPrompt();
                }
            }
        });

        window.onload = init;
    </script>
</body>
</html>
